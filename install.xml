<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<?xml-stylesheet type="text/xsl" href="modx.prosilver.en.xsl"?>
<!--For security purposes, please check: http://www.phpbb.com/mods/ for the latest version of this MOD. Although MODs are checked before being allowed in the MODs Database there is no guarantee that there are no security problems within the MOD. No support will be given for MODs not found within the MODs Database which can be found at http://www.phpbb.com/mods/-->
<mod xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.phpbb.com/mods/xml/modx-1.0.xsd">
  <header>
    <license>http://opensource.org/licenses/gpl-license.php GNU General Public License v2</license>
    <title lang="en-gb">NV "who was here?"</title>
    <title lang="de">NV "Wer war da?"</title>
    <description lang="en-gb">Adds a list with all users, which visited the page today, on the index.php.
With saving the record of usercount.
Features:
» en-/disable bots in the list (adjustable in ACP)
» en-/disable guests in the record (adjustable in ACP)
» en-/disable record (adjustable in ACP)
» en-/disable visit-time in the list (adjustable in ACP)
» "Who was here?" or "Who was here in the last time?" (adjustable in ACP)
» record-reset-function (in ACP)

Thx to .:: Chico ::. for giving my access to his server to test the new version</description>
    <description lang="de">Fügt auf der index.php einen Abschnitt hinzu, wo die User aufgelistet werden,
die am heutigem Tage online gewesen sind.
Features:
» Bots in der Liste ein-/ausblenden (im ACP einstellbar)
» Gäste im Rekord ein-/ausschließen (im ACP einstellbar)
» Rekord ein-/ausschalten (im ACP einstellbar)
» Besuchszeit in der Liste ein-/ausblenden (im ACP einstellbar)
» "Wer war heute da?" oder "Wer war im Zeitraum da?" (im ACP einstellbar)
» Rekord-Reset-Funktion (im ACP)
</description>
    <author-notes lang="en-gb">i hope you get it installed, otherwise you can ask for help on phpbb.de and phpbb.com</author-notes>
    <author-notes lang="de">Ich hoffe ihr kommt mit dem MOD klar. Wenn nicht, könnt ihr auf phpbb.de oder phpbb.com eure Fragen stellen.</author-notes>
    <author-group>
      <author>
        <realname>(N/A) / nick: clusedo</realname>
        <email>nickvergessen@gmx.de</email>
        <username>nickvergessen</username>
        <homepage>http://mods.flying-bits.org/</homepage>
        <contributions />
      </author>
    </author-group>
    <mod-version>
      <major>6</major>
      <minor>0</minor>
      <revision>5</revision>
    </mod-version>
    <installation>
      <level>easy</level>
      <time>240</time>
      <target-version>
        <target-primary>3.0.0</target-primary>
        <target-major allow="exact">3</target-major>
        <target-minor allow="exact">0</target-minor>
      </target-version>
    </installation>
    <history>
      <entry>
        <date>2007-12-13</date>
        <rev-version>
          <major>6</major>
          <minor>0</minor>
          <revision>4</revision>
        </rev-version>
        <changelog lang="en-GB">
          <change>fix: displaying wrong time in normal and 0 on hover</change>
        </changelog>
        <changelog lang="de">
          <change>Fix: falsche Zeit angezeigt, oder 0 beim Hover</change>
        </changelog>
      </entry>
      <entry>
        <date>2007-12-10</date>
        <rev-version>
          <major>6</major>
          <minor>0</minor>
          <revision>3</revision>
        </rev-version>
        <changelog lang="en-GB">
          <change>last feature: display time on name-hover</change>
        </changelog>
        <changelog lang="de">
          <change>letztes Feature: Zeit beim überfahren des Namens anzeigen</change>
        </changelog>
      </entry>
      <entry>
        <date>2007-12-02</date>
        <rev-version>
          <major>6</major>
          <minor>0</minor>
          <revision>2</revision>
        </rev-version>
        <changelog lang="en-GB">
          <change>this should be the final fix for the timezone problem</change>
        </changelog>
        <changelog lang="de">
          <change>Jetzt sollte endlich das Problem mit den Zeitzonen erledigt sein</change>
        </changelog>
      </entry>
      <entry>
        <date>2007-10-22</date>
        <rev-version>
          <major>6</major>
          <minor>0</minor>
          <revision>1</revision>
        </rev-version>
        <changelog lang="en-GB">
          <change>fixed 2 bugs:
- on displaying a page without having installed
- in the acp</change>
        </changelog>
        <changelog lang="de">
          <change>2 Bugs behoben:
- beim Aufrufen der Seite ohne Installation
- im ACP</change>
        </changelog>
      </entry>
      <entry>
        <date>2007-10-21</date>
        <rev-version>
          <major>6</major>
          <minor>0</minor>
          <revision>0</revision>
        </rev-version>
        <changelog lang="en-GB">
          <change>updated to RC7</change>
          <change>created its own module</change>
          <change>fixed some bugs</change>
        </changelog>
        <changelog lang="de">
          <change>auf RC7 angepasst</change>
          <change>eigenes Modul erstellt</change>
          <change>einige Bugs behoben</change>
        </changelog>
      </entry>
    </history>
    <meta name="generator" content="Phpbb.ModTeam.Tools (c#)" />
  </header>
  <action-group>
    <copy>
      <file from="root/adm/style/acp_wwh.html" to="adm/style/acp_wwh.html" />
      <file from="root/includes/functions_wwh.php" to="includes/functions_wwh.php" />
      <file from="root/includes/functions_wwh2.php" to="includes/functions_wwh2.php" />
      <file from="root/includes/acp/acp_wwh.php" to="includes/acp/acp_wwh.php" />
      <file from="root/includes/acp/info/acp_wwh.php" to="includes/acp/info/acp_wwh.php" />
      <file from="root/install_wwh/schemas/*.*" to="install_wwh/schemas/*.*" />
      <file from="root/install_wwh/*.*" to="install_wwh/*.*" />
      <file from="root/language/en/mods/info_acp_wwh.php" to="language/en/mods/info_acp_wwh.php" />
      <file from="root/language/en/mods/lang_wwh.php" to="language/en/mods/lang_wwh.php" />
      <file from="root/language/en/mods/lang_wwh_acp.php" to="language/en/mods/lang_wwh_acp.php" />
    </copy>
    <open src="index.php">
      <edit>
        <find><![CDATA[// Output page
page_header($user->lang['INDEX']);]]></find>
        <action type="after-add"><![CDATA[include($phpbb_root_path . 'includes/functions_wwh.' . $phpEx);]]></action>
      </edit>
    </open>
    <open src="includes/constants.php">
      <edit>
        <find><![CDATA[// Additional tables]]></find>
        <action type="after-add"><![CDATA[define('WWH_TABLE',					$table_prefix . 'wwh');]]></action>
      </edit>
    </open>
    <open src="includes/functions.php">
      <edit>
        <find><![CDATA[	// Which timezone?
	$tz = ($user->data['user_id'] != ANONYMOUS) ? strval(doubleval($user->data['user_timezone'])) : strval(doubleval($config['board_timezone']));]]></find>
        <action type="after-add"><![CDATA[//---- [ who was here ] ----
include_once($phpbb_root_path . 'includes/functions_wwh2.' . $phpEx);
//---- [ who was here ] ----]]></action>
      </edit>
    </open>
    <open src="styles/prosilver/template/index_body.html">
      <edit>
        <find><![CDATA[	<!-- IF U_VIEWONLINE --><h3><a href="{U_VIEWONLINE}">{L_WHO_IS_ONLINE}</a></h3><!-- ELSE --><h3>{L_WHO_IS_ONLINE}</h3><!-- ENDIF -->
	<p>{TOTAL_USERS_ONLINE} ({L_ONLINE_EXPLAIN})<br />{RECORD_USERS}<br /> <br />{LOGGED_IN_USER_LIST}
	<!-- IF LEGEND --><br /><em>{L_LEGEND}: {LEGEND}</em><!-- ENDIF --></p>]]></find>
        <action type="after-add"><![CDATA[	<h3>{L_WHO_WAS_HERE}</h3>
	<p><!-- IF WHO_WAS_HERE_LIST2 -->{WHO_WAS_HERE_LIST2}<br />({WHO_WAS_HERE_EXP})<br />{WHO_WAS_HERE_RECORD}<br />{WHO_WAS_HERE_LIST}<!-- ELSE -->{L_WWH_UPDATE_NEED}<!-- ENDIF --></p>]]></action>
      </edit>
    </open>
    <diy-instructions lang="en-gb">If you want me to add your language file to the download, just leave me a pm:
http://www.phpbb.com/community/ucp.php?i=pm&amp;mode=compose&amp;u=315319

Browse to install_wwh/install.php and run the installer</diy-instructions>
    <diy-instructions lang="de">Wenn ihr den MOD in eine weitere Sprache übersetzt habt, schickt mir doch eine pm:
http://www.phpbb.com/community/ucp.php?i=pm&amp;mode=compose&amp;u=315319

install_wwh/install.php aufrufen und ausführen</diy-instructions>
  </action-group>
</mod>