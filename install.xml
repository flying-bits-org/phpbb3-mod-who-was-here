<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<?xml-stylesheet type="text/xsl" href="modx.prosilver.en.xsl"?>
<!--For security purposes, please check: http://www.phpbb.com/mods/ for the latest version of this MOD. Although MODs are checked before being allowed in the MODs Database there is no guarantee that there are no security problems within the MOD. No support will be given for MODs not found within the MODs Database which can be found at http://www.phpbb.com/mods/-->
<mod xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.phpbb.com/mods/xml/modx-1.2.0.xsd">
  <header>
    <license>http://opensource.org/licenses/gpl-license.php GNU General Public License v2</license>
    <title lang="en-gb"><![CDATA[NV "who was here?"]]></title>
    <title lang="de"><![CDATA[NV "Wer war da?"]]></title>
    <description lang="en-gb"><![CDATA[Adds a list with all users, which visited the page today, on the index.php.
With saving the record of usercount.
Features:
	• en-/disable bots in the list (adjustable in ACP)
	• en-/disable hidden users in the list (adjustable in ACP)
	• en-/disable guests in the record (adjustable in ACP)
	• en-/disable visit-time in the list or as "hover" on the name (adjustable in ACP)

	• "Who was here?" or "Who was here in the last time?" (adjustable in ACP)
	• display and store the record (in ACP)
	• reset-function (in ACP)

	• time is displayed with user-timezone and dst(daylight-saving-time) adjustment of the ucp
	• usernames are coloured
	]]></description>
    <description lang="de"><![CDATA[Fügt auf der index.php einen Abschnitt hinzu, wo die User aufgelistet werden,
die am heutigem Tage online gewesen sind.
Features:
	• Bots in der Liste ein-/ausblenden (im ACP einstellbar)
	• unsichtbare Benutzer in der Liste ein-/ausblenden (im ACP einstellbar)
	• Gäste im Rekord mitzählen (im ACP einstellbar)
	• Besuchszeit in der Liste ein-/ausblenden oder als "hover"-Effekt auf dem Benutzernamen (im ACP einstellbar)

	• Rekord speichern und anzeigen (im ACP einstellbar)
	• Es gibt 2 Modi:
	   1. "Wer war heute da?": Hier bei werden alle Benutzer angezeigt, die am heutigen Tage online waren.
	   2. "Wer war in der letzten Zeit da?": Der Zeitraum in dem die Besucher dagewesen sein sollen, kann im ACP eingestellt werden.
	• Die Liste kann im Administrationsbereich zurückgesetzt werden.

	• Die Zeit wird nach der Einstellung des Benutzers im persönlichen Bereich ausgegeben. Also mit Berücksichtigung von Zeitzone und Sommerzeit.
	• Die Benutzernamen sind eingefärbt.
]]></description>
    <author-notes lang="en-gb"><![CDATA[i hope you get it installed, otherwise you can ask for help on phpbb.de and phpbb.com



	NOTE: If you want to be informed, when there should be a new version of this MOD available,
	Please register on my Site and join the Group "MODs - NV Who Was Here? - Newsletter".

	I you want to be informed when i release any new version for one of my MODs join the Group "MODs - Newsletter"]]></author-notes>
    <author-notes lang="de"><![CDATA[Ich hoffe ihr kommt mit dem MOD klar. Wenn nicht, könnt ihr auf phpbb.de oder phpbb.com eure Fragen stellen.



	HINWEIS: Wenn du über neue Versionen informiert werden willst,
	Melde dich auch meiner Seite an und trette der Gruppe "MODs - NV AWho Was Here? - Newsletter" bei.

	Wenn du über alle MODs von mir informiert werden willst, trette der Gruppe "MODs - Newsletter" bei]]></author-notes>
    <author-group>
      <author>
        <realname>Joas Schilling</realname>
        <email>nickvergessen@gmx.de</email>
        <username>nickvergessen</username>
        <homepage>http://www.flying-bits.org/</homepage>
        <contributions />
      </author>
    </author-group>
    <mod-version>
      <major>6</major>
      <minor>0</minor>
      <revision>6</revision>
    </mod-version>
    <installation>
      <level>easy</level>
      <time>240</time>
      <target-version>
        <target-primary>3.0.1</target-primary>
        <target-major allow="exact">3</target-major>
        <target-minor allow="exact">0</target-minor>
      </target-version>
    </installation>
    <link-group>
      <link type="language" lang="de" href="de.xml">Anleitung für das deutsche Sprachpaket</link>
      <link type="language" lang="en-gb" href="de.xml">Manual for German Language-set</link>
      <link type="language" lang="de" href="fr.xml">Anleitung für das französische Sprachpaket</link>
      <link type="language" lang="en-gb" href="fr.xml">Manual for French Language-set</link>
      <link type="template" lang="de" href="subsilver2.xml">Anleitung für das Style subsilver2</link>
      <link type="template" lang="en-gb" href="subsilver2.xml">Manual for subsilver2 Style</link>
    </link-group>
    <history>
      <entry>
        <date>2008-06-02</date>
        <rev-version>
          <major>6</major>
          <minor>0</minor>
          <revision>6</revision>
        </rev-version>
        <changelog lang="en-GB">
          <change><![CDATA[[Add] ACP-Option for the timestamp of the user-record]]></change>
          <change><![CDATA[[Change] sql-Index by user-option]]></change>
        </changelog>
        <changelog lang="de">
          <change><![CDATA[[Add] ACP-Option für das Datumsformat beim User-Rekord]]></change>
          <change><![CDATA[[Change] SQL-Index nach Benutzer-Eingabe]]></change>
          <change><![CDATA[[Fix] Sprachanpassung an phpBB3.0.1]]></change>
        </changelog>
      </entry>
      <entry>
        <date>2008-01-28</date>
        <rev-version>
          <major>6</major>
          <minor>0</minor>
          <revision>5</revision>
        </rev-version>
        <changelog lang="en-GB">
          <change><![CDATA[[Add] Option to handle invisible users]]></change>
          <change><![CDATA[[Add] sql-Index to id-column to improve reading speed. (credits to Mahony from the phpbb.de-Team)]]></change>
        </changelog>
        <changelog lang="de">
          <change><![CDATA[[Add] Option zum ausblenden der unsichtbaren Benutzer]]></change>
          <change><![CDATA[[Add] SQL-Index auf id-Spalte um die Auslese-geschwindigkeit zu verbessern (Dank an Mahony aus dem phpbb.de-Team)]]></change>
        </changelog>
      </entry>
      <entry>
        <date>2007-12-13</date>
        <rev-version>
          <major>6</major>
          <minor>0</minor>
          <revision>4</revision>
        </rev-version>
        <changelog lang="en-GB">
          <change><![CDATA[[Fix] displaying wrong time in normal and 0 on hover]]></change>
        </changelog>
        <changelog lang="de">
          <change><![CDATA[[Fix] falsche Zeit angezeigt, oder 0 beim Hover]]></change>
        </changelog>
      </entry>
      <entry>
        <date>2007-12-10</date>
        <rev-version>
          <major>6</major>
          <minor>0</minor>
          <revision>3</revision>
        </rev-version>
        <changelog lang="en-GB">
          <change><![CDATA[[Add] last feature: display time on name-hover]]></change>
        </changelog>
        <changelog lang="de">
          <change><![CDATA[[Add] letztes Feature: Zeit beim überfahren des Namens anzeigen]]></change>
        </changelog>
      </entry>
      <entry>
        <date>2007-12-02</date>
        <rev-version>
          <major>6</major>
          <minor>0</minor>
          <revision>2</revision>
        </rev-version>
        <changelog lang="en-GB">
          <change><![CDATA[[Fix] this should be the final fix for the timezone problem]]></change>
        </changelog>
        <changelog lang="de">
          <change><![CDATA[[Fix] Jetzt sollte endlich das Problem mit den Zeitzonen erledigt sein]]></change>
        </changelog>
      </entry>
      <entry>
        <date>2007-10-22</date>
        <rev-version>
          <major>6</major>
          <minor>0</minor>
          <revision>1</revision>
        </rev-version>
        <changelog lang="en-GB">
          <change><![CDATA[[Fix] on displaying a page without having installed]]></change>
          <change><![CDATA[[Fix] in the acp]]></change>
        </changelog>
        <changelog lang="de">
          <change><![CDATA[[Fix] beim Aufrufen der Seite ohne Installation]]></change>
          <change><![CDATA[[Fix] im ACP]]></change>
        </changelog>
      </entry>
      <entry>
        <date>2007-10-21</date>
        <rev-version>
          <major>6</major>
          <minor>0</minor>
          <revision>0</revision>
        </rev-version>
        <changelog lang="en-GB">
          <change><![CDATA[[Change] updated to RC7]]></change>
          <change><![CDATA[[Change] created its own module]]></change>
          <change><![CDATA[[Fix] fixed some bugs]]></change>
        </changelog>
        <changelog lang="de">
          <change><![CDATA[[Change] auf RC7 angepasst]]></change>
          <change><![CDATA[[Change] eigenes Modul erstellt]]></change>
          <change><![CDATA[[Fix] einige Bugs behoben]]></change>
        </changelog>
      </entry>
    </history>
    <meta name="generator" content="Phpbb.ModTeam.Tools (c#)" />
  </header>
  <action-group>
    <copy>
      <file from="root/adm/style/acp_wwh.html" to="adm/style/acp_wwh.html" />
      <file from="root/includes/functions_wwh.php" to="includes/functions_wwh.php" />
      <file from="root/includes/functions_wwh2.php" to="includes/functions_wwh2.php" />
      <file from="root/includes/acp/acp_wwh.php" to="includes/acp/acp_wwh.php" />
      <file from="root/includes/acp/info/acp_wwh.php" to="includes/acp/info/acp_wwh.php" />
      <file from="root/install_wwh/schemas/*.*" to="install_wwh/schemas/*.*" />
      <file from="root/install_wwh/*.*" to="install_wwh/*.*" />
      <file from="root/language/en/mods/info_acp_wwh.php" to="language/en/mods/info_acp_wwh.php" />
      <file from="root/language/en/mods/lang_wwh.php" to="language/en/mods/lang_wwh.php" />
      <file from="root/language/en/mods/lang_wwh_acp.php" to="language/en/mods/lang_wwh_acp.php" />
    </copy>
    <open src="index.php">
      <edit>
        <find><![CDATA[// Assign index specific vars]]></find>
        <action type="before-add"><![CDATA[include($phpbb_root_path . 'includes/functions_wwh.' . $phpEx);]]></action>
      </edit>
    </open>
    <open src="includes/constants.php">
      <edit>
        <find><![CDATA[// Additional tables]]></find>
        <action type="after-add"><![CDATA[define('WWH_TABLE',					$table_prefix . 'wwh');]]></action>
      </edit>
    </open>
    <open src="includes/functions.php">
      <edit>
        <find><![CDATA[	// Which timezone?
	$tz = ($user->data['user_id'] != ANONYMOUS) ? strval(doubleval($user->data['user_timezone'])) : strval(doubleval($config['board_timezone']));]]></find>
        <action type="after-add"><![CDATA[include_once($phpbb_root_path . 'includes/functions_wwh2.' . $phpEx);]]></action>
      </edit>
    </open>
    <open src="styles/prosilver/template/index_body.html">
      <edit>
        <find><![CDATA[	<!-- IF U_VIEWONLINE --><h3><a href="{U_VIEWONLINE}">{L_WHO_IS_ONLINE}</a></h3><!-- ELSE --><h3>{L_WHO_IS_ONLINE}</h3><!-- ENDIF -->
	<p>{TOTAL_USERS_ONLINE} ({L_ONLINE_EXPLAIN})<br />{RECORD_USERS}<br /> <br />{LOGGED_IN_USER_LIST}
	<!-- IF LEGEND --><br /><em>{L_LEGEND}: {LEGEND}</em><!-- ENDIF --></p>]]></find>
        <action type="after-add"><![CDATA[	<h3>{L_WHO_WAS_HERE}</h3>
	<p><!-- IF WHO_WAS_HERE_LIST2 -->{WHO_WAS_HERE_LIST2} ({WHO_WAS_HERE_EXP})<br />{WHO_WAS_HERE_RECORD}<br />{WHO_WAS_HERE_LIST}<!-- ELSE -->{L_WWH_UPDATE_NEED}<!-- ENDIF --></p>]]></action>
      </edit>
    </open>
    <diy-instructions lang="en-gb"><![CDATA[If you want me to add your language file to the download, just leave me a pm:
http://www.phpbb.com/community/ucp.php?i=pm&amp;mode=compose&amp;u=315319

Browse to install_wwh/install.php and run the installer]]></diy-instructions>
    <diy-instructions lang="de"><![CDATA[Wenn ihr den MOD in eine weitere Sprache übersetzt habt, schickt mir doch eine pm:
http://www.phpbb.com/community/ucp.php?i=pm&amp;mode=compose&amp;u=315319

install_wwh/install.php aufrufen und ausführen]]></diy-instructions>
  </action-group>
</mod>